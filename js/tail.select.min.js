const tail={select:function(e,t={}){const n={multiTags:!1,multiCounter:!0,multiLimit:1/0,minSelectionLimit:0,theme:"light",classNames:"tail-default",buttonAll:!0,buttonNone:!0,buttonClose:!1,buttonCloseText:"✕",strings:{all:"All",none:"None",placeholder:"Select an option...",search:"Type in to search...",limitExceded:"You can only select {0} option(s)!",minimumReached:"You need to select at least {0} option(s)!"}},l={...n,...t},{multiTags:o,multiCounter:c,multiLimit:i,minSelectionLimit:a,theme:s,classNames:d,buttonAll:r,buttonNone:u,buttonClose:p,buttonCloseText:m,strings:h}=l;null!=h&&(null!=h.limitExceded&&i<1/0&&(h.limitExceded=h.limitExceded.replace("{0}",i)),null!=h.minimumReached&&a>0&&(h.minimumReached=h.minimumReached.replace("{0}",a)));const y=document.querySelectorAll(e);y.forEach(e=>{function t(){const t=document.createDocumentFragment(),n=e.getElementsByTagName("optgroup");if(n.length>0)for(let t=0;t<n.length;t++){const l=n[t],o=document.createElement("div");o.classList.add("tail--optgroup");const c=document.createElement("label"),i=document.createElement("input");i.type="checkbox",i.value=l.label,i.addEventListener("change",()=>r(i)),c.appendChild(i);const a=document.createElement("span");a.textContent=l.label,a.classList.add("tail--optgroup-label"),c.appendChild(a),o.appendChild(c);const s=document.createElement("div");s.setAttribute("role","listbox"),s.classList.add("tail--nested-dropdown-list");const d=l.getElementsByTagName("option");for(let t=0;t<d.length;t++){const n=d[t],l=document.createElement("div");l.classList.add("tail--nested-dropdown-item");const o=document.createElement("input");o.type="checkbox",o.value=n.textContent;const c=document.createElement("label"),i=document.createElement("span");i.textContent=n.textContent,n.dataset.description&&(i.innerHTML+=`<small>${n.dataset.description}</small>`),n.selected&&n.hasAttribute("selected")&&(o.checked=!0,f(e),b(e)),n.hasAttribute("disabled")&&(o.disabled=!0),c.appendChild(o),c.appendChild(i),l.appendChild(c),s.appendChild(l)}o.appendChild(s),T.appendChild(o)}else{const t=e.getElementsByTagName("option");for(let n=0;n<t.length;n++){const l=t[n],o=document.createElement("div");o.classList.add("tail--nested-dropdown-item");const c=document.createElement("input");c.type="checkbox",c.value=l.textContent;const i=document.createElement("label"),a=document.createElement("span");a.textContent=l.textContent,l.dataset.description&&(a.innerHTML+=`<small>${l.dataset.description}</small>`),l.selected&&l.hasAttribute("selected")&&(c.checked=!0,f(e),b(e)),l.hasAttribute("disabled")&&(c.disabled=!0),i.appendChild(c),i.appendChild(a),o.appendChild(i),T.appendChild(o)}}v.setAttribute("role","combobox"),v.setAttribute("aria-haspopup","true"),v.setAttribute("aria-expanded","false"),u(),T.appendChild(t)}function n(e,t){if(e.options.length>i)return void d(h.limitExceded||`You can only select ${i} option(s)!`);const n=t.checked,l=T.querySelectorAll('input[type="checkbox"]');l.forEach(t=>{t.checked=n,p(e,t)})}function o(e){const t=T.querySelectorAll('input[type="checkbox"]');t.forEach(t=>{t.checked=!1,p(e,t)});const n=e.getElementsByTagName("option");for(let e=0;e<n.length;e++)n[e].selected=!1}function c(t){if(e.multiple){if(s(t.checked)){t.checked=!t.checked,C();const n=e.selectedOptions.length>=i?h.limitExceded||`You can only select ${i} option(s)!`:h.minimumReached||`You need to select at least ${a} option(s)!`;return void d(n)}p(e,t)}else{const n=T.querySelectorAll('.tail--nested-dropdown-item input[type="checkbox"]');n.forEach(e=>e.checked=!1),t.checked=!0,p(e,t),C()}}function s(t){return t?e.selectedOptions.length>=i:e.selectedOptions.length==a}function d(e){const t=document.createElement("p");t.textContent=e,v.parentNode.appendChild(t),setTimeout(()=>{v.parentNode.removeChild(t)},2e3)}function r(t){const n=t.checked,l=t.closest(".tail--optgroup").querySelector(".tail--nested-dropdown-list"),o=l.querySelectorAll('input[type="checkbox"]');if(o.forEach(e=>{e.checked=n,c(e)}),!e.multiple){const n=e.closest(".tail-select");if(n){const l=n.querySelectorAll('.tail--nested-dropdown-item input[type="checkbox"]');l.forEach(n=>{n!==t&&(n.checked=!1,p(e,n))})}}p(e,t)}function u(){const e=T.querySelectorAll('.tail--nested-dropdown-item input[type="checkbox"]');e.forEach(e=>{e.addEventListener("change",()=>c(e))})}function p(e,t,n){const o=t.value,c=Array.from(e.options).find(e=>e.value===o||e.textContent===o);if(c){t.checked?c.selected=!0:c.selected=!1;const n=new Event("change",{bubbles:!0});e.dispatchEvent(n)}const i=Array.from(e.options).filter(e=>e.selected);e.multiple?L.value=i.map(e=>e.textContent).join(", "):i.length>0&&L?L.value=i[0].textContent:L.value="",l.multiTags&&e.multiple&&y(q,i);i.map(e=>e.value);for(var a=e.options,s=0,d=0;d<a.length;d++)a[d].selected&&s++;if(l.multiCounter){let t=e.id;if(t){let e=document.querySelector(`.${t}`).querySelector(".tail--counter");e&&(e.textContent=s)}}}function m(e,t){const n=t.value.trim().toLowerCase(),l=T.querySelectorAll("div");l.forEach(e=>{const t=e.querySelector('input[type="checkbox"]'),l=t.nextElementSibling.textContent.toLowerCase();e.closest("div");t.style.display=l.includes(n)?"inline-block":"none"}),l.forEach(e=>{const t=e.querySelector('input[type="checkbox"]'),n=e.closest("div"),l=e.querySelectorAll('div input[type="checkbox"]:not([style="display: none;"])'),o=l.length>0;n.style.display="inline-block"===t.style.display||o?"block":"none"})}function y(e,t){e.innerHTML="",t.forEach(t=>{const n=document.createElement("li");n.textContent=t.textContent,e.appendChild(n)})}function b(e){const t=Array.from(e.options).filter(e=>e.selected&&e.hasAttribute("selected"));e.multiple?L.value=t.map(e=>e.textContent).join(", "):t.length>0&&L?L.value=t[0].textContent:L.value="",l.multiTags&&e.multiple&&y(q,t)}function f(e){let t=e.id;if(t){let n=document.querySelector(`.${t}`).querySelector(".tail--counter");if(n){const t=Array.from(e.options).filter(e=>e.selected).length;n.textContent=t}}}function E(){T.style.display="block",v.setAttribute("aria-expanded","true")}function C(){T.style.display="none",v.setAttribute("aria-expanded","false")}function x(e){v.contains(e.target)||C()}function g(e){"Escape"===e.key&&C()}e.style.display="none";const v=document.createElement("div");v.classList.add("tail-select"),v.classList.add(e.id),"string"==typeof l.classNames&&v.classList.add(...l.classNames.split(" ")),"boolean"==typeof l.classNames&&!0===l.classNames&&v.classList.add(...e.classList.value.split(" ")),Array.isArray(l.classNames)&&v.classList.add(...l.classNames),v.dataset.theme=`tail-theme--${l.theme}`,e.multiple?v.classList.add("tail--multiple"):v.classList.add("tail--single");const L=document.createElement("input");L.type="text",L.classList.add("tail--search"),L.placeholder=h.placeholder||"Select an option...",L.addEventListener("focus",()=>{L.placeholder=h.search||"Type in to search..."}),L.addEventListener("blur",()=>{L.placeholder=h.placeholder||"Select an option..."}),L.addEventListener("input",()=>m(e,L));const k=document.createElement("div");k.classList.add("tail--toolbar");const A=document.createElement("input");A.type="checkbox",A.value=h.all||"All",A.addEventListener("change",()=>n(e,A));const S=document.createElement("label");S.textContent=h.all||"All",S.classList.add("all"),S.appendChild(A);const N=document.createElement("button");if(N.type="button",N.textContent=h.none||"None",N.classList.add("uncheck"),N.addEventListener("click",()=>o(e)),l.multiCounter){const e=document.createElement("span");e.textContent="0",e.classList.add("tail--counter"),v.appendChild(e)}const T=document.createElement("div");if(T.classList.add("tail--nested-dropdown"),T.style.display="none",v.appendChild(L),v.appendChild(k),v.appendChild(T),l.buttonAll&&k.appendChild(S),l.buttonNone&&k.appendChild(N),e.multiple&&l.buttonClose){const e=document.createElement("button");e.type="button",e.textContent=l.buttonCloseText||"✕",e.classList.add("tail--close"),e.addEventListener("click",()=>{C()}),k.appendChild(e)}e.insertAdjacentElement("afterend",v);const q=document.createElement("ul");q.classList.add("tail--selected-options-list"),l.multiTags&&e.multiple&&v.insertAdjacentElement("afterend",q),L.addEventListener("focus",E),document.addEventListener("click",x),document.addEventListener("keydown",g),t()})}};
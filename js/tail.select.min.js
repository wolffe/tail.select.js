const tail={select:function(e,t={}){const n={multiTags:!1,multiCounter:!0,theme:"light",classNames:"tail-default",buttonAll:!0,buttonNone:!0,buttonClose:!1,buttonCloseText:"✕",strings:{all:"All",none:"None",placeholder:"Select an option...",search:"Type in to search..."}},l={...n,...t},{multiTags:o,multiCounter:c,theme:a,classNames:s,strings:d}=l,i=document.querySelectorAll(e);i.forEach(e=>{function t(){const t=document.createDocumentFragment(),n=e.getElementsByTagName("optgroup");if(n.length>0)for(let t=0;t<n.length;t++){const l=n[t],o=document.createElement("div");o.classList.add("tail--optgroup");const c=document.createElement("label"),s=document.createElement("input");s.type="checkbox",s.value=l.label,s.addEventListener("change",()=>a(s)),c.appendChild(s);const d=document.createElement("span");d.textContent=l.label,d.classList.add("tail--optgroup-label"),c.appendChild(d),o.appendChild(c);const i=document.createElement("div");i.setAttribute("role","listbox"),i.classList.add("tail--nested-dropdown-list");const r=l.getElementsByTagName("option");for(let t=0;t<r.length;t++){const n=r[t],l=document.createElement("div");l.classList.add("tail--nested-dropdown-item");const o=document.createElement("input");o.type="checkbox",o.value=n.textContent;const c=document.createElement("label"),a=document.createElement("span");a.textContent=n.textContent,n.dataset.description&&(a.innerHTML+=`<small>${n.dataset.description}</small>`),n.selected&&n.hasAttribute("selected")&&(o.checked=!0,m(e),p(e)),n.hasAttribute("disabled")&&(o.disabled=!0),c.appendChild(o),c.appendChild(a),l.appendChild(c),i.appendChild(l)}o.appendChild(i),L.appendChild(o)}else{const t=e.getElementsByTagName("option");for(let n=0;n<t.length;n++){const l=t[n],o=document.createElement("div");o.classList.add("tail--nested-dropdown-item");const c=document.createElement("input");c.type="checkbox",c.value=l.textContent;const a=document.createElement("label"),s=document.createElement("span");s.textContent=l.textContent,l.dataset.description&&(s.innerHTML+=`<small>${l.dataset.description}</small>`),l.selected&&l.hasAttribute("selected")&&(c.checked=!0,m(e),p(e)),l.hasAttribute("disabled")&&(c.disabled=!0),a.appendChild(c),a.appendChild(s),o.appendChild(a),L.appendChild(o)}}E.setAttribute("role","combobox"),E.setAttribute("aria-haspopup","true"),E.setAttribute("aria-expanded","false"),s(),L.appendChild(t)}function n(e,t){const n=t.checked,l=L.querySelectorAll('input[type="checkbox"]');l.forEach(t=>{t.checked=n,i(e,t)})}function o(e){const t=L.querySelectorAll('input[type="checkbox"]');t.forEach(t=>{t.checked=!1,i(e,t)});const n=e.getElementsByTagName("option");for(let e=0;e<n.length;e++)n[e].selected=!1}function c(t){if(e.multiple)i(e,t);else{const n=L.querySelectorAll('.tail--nested-dropdown-item input[type="checkbox"]');n.forEach(e=>e.checked=!1),t.checked=!0,i(e,t),b()}}function a(t){const n=t.checked,l=t.closest(".tail--optgroup").querySelector(".tail--nested-dropdown-list"),o=l.querySelectorAll('input[type="checkbox"]');if(o.forEach(e=>{e.checked=n,c(e)}),!e.multiple){const n=e.closest(".tail-select");if(n){const l=n.querySelectorAll('.tail--nested-dropdown-item input[type="checkbox"]');l.forEach(n=>{n!==t&&(n.checked=!1,i(e,n))})}}i(e,t)}function s(){const e=L.querySelectorAll('.tail--nested-dropdown-item input[type="checkbox"]');e.forEach(e=>{e.addEventListener("change",()=>c(e))})}function i(e,t,n){const o=t.value,c=Array.from(e.options).find(e=>e.value===o||e.textContent===o);if(c){t.checked?c.selected=!0:c.selected=!1;const n=new Event("change",{bubbles:!0});e.dispatchEvent(n)}const a=Array.from(e.options).filter(e=>e.selected);e.multiple?C.value=a.map(e=>e.textContent).join(", "):a.length>0&&C?C.value=a[0].textContent:C.value="",l.multiTags&&e.multiple&&u(A,a);a.map(e=>e.value);for(var s=e.options,d=0,i=0;i<s.length;i++)s[i].selected&&d++;if(l.multiCounter){let t=e.id;if(t){let e=document.querySelector(`.${t}`).querySelector(".tail--counter");e&&(e.textContent=d)}}}function r(e,t){const n=t.value.trim().toLowerCase(),l=L.querySelectorAll("div");l.forEach(e=>{const t=e.querySelector('input[type="checkbox"]'),l=t.nextElementSibling.textContent.toLowerCase();e.closest("div");t.style.display=l.includes(n)?"inline-block":"none"}),l.forEach(e=>{const t=e.querySelector('input[type="checkbox"]'),n=e.closest("div"),l=e.querySelectorAll('div input[type="checkbox"]:not([style="display: none;"])'),o=l.length>0;n.style.display="inline-block"===t.style.display||o?"block":"none"})}function u(e,t){e.innerHTML="",t.forEach(t=>{const n=document.createElement("li");n.textContent=t.textContent,e.appendChild(n)})}function p(e){const t=Array.from(e.options).filter(e=>e.selected&&e.hasAttribute("selected"));e.multiple?C.value=t.map(e=>e.textContent).join(", "):t.length>0&&C?C.value=t[0].textContent:C.value="",l.multiTags&&e.multiple&&u(A,t)}function m(e){let t=e.id;if(t){let n=document.querySelector(`.${t}`).querySelector(".tail--counter");if(n){const t=Array.from(e.options).filter(e=>e.selected).length;n.textContent=t}}}function h(){L.style.display="block",E.setAttribute("aria-expanded","true")}function b(){L.style.display="none",E.setAttribute("aria-expanded","false")}function y(e){E.contains(e.target)||b()}function f(e){"Escape"===e.key&&b()}e.style.display="none";const E=document.createElement("div");E.classList.add("tail-select"),E.classList.add(e.id),E.classList.add(l.classNames),E.dataset.theme=`tail-theme--${l.theme}`,e.multiple?E.classList.add("tail--multiple"):E.classList.add("tail--single");const C=document.createElement("input");C.type="text",C.classList.add("tail--search"),C.placeholder=d.placeholder||"Select an option...",C.addEventListener("focus",()=>{C.placeholder=d.search||"Type in to search..."}),C.addEventListener("blur",()=>{C.placeholder=d.placeholder||"Select an option..."}),C.addEventListener("input",()=>r(e,C));const x=document.createElement("div");x.classList.add("tail--toolbar");const v=document.createElement("input");v.type="checkbox",v.value=d.all||"All",v.addEventListener("change",()=>n(e,v));const g=document.createElement("label");g.textContent=d.all||"All",g.classList.add("all"),g.appendChild(v);const k=document.createElement("button");if(k.type="button",k.textContent=d.none||"None",k.classList.add("uncheck"),k.addEventListener("click",()=>o(e)),l.multiCounter){const e=document.createElement("span");e.textContent="0",e.classList.add("tail--counter"),E.appendChild(e)}const L=document.createElement("div");if(L.classList.add("tail--nested-dropdown"),L.style.display="none",E.appendChild(C),E.appendChild(x),E.appendChild(L),l.buttonAll&&x.appendChild(g),l.buttonNone&&x.appendChild(k),e.multiple&&l.buttonClose){const e=document.createElement("button");e.type="button",e.textContent=l.buttonCloseText||"✕",e.classList.add("tail--close"),e.addEventListener("click",()=>{b()}),x.appendChild(e)}e.insertAdjacentElement("afterend",E);const A=document.createElement("ul");A.classList.add("tail--selected-options-list"),l.multiTags&&e.multiple&&E.insertAdjacentElement("afterend",A),C.addEventListener("focus",h),document.addEventListener("click",y),document.addEventListener("keydown",f),t()})}};